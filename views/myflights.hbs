<head>
    <title>My Flights</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="/css/myflights.css">
</head>
<body>
    <h1>My upcomming flights</h1>

    {{#if flights}}
        <div class="row"> 
        {{#each flights}}
            <div class="col-md-4 mb-4"> <div class="flight-card p-3">
                    <img src="/img/{{this.airline}}.png" alt="{{this.airline}}.png" class="airline-logo"> <p class="card-text"> 
                    <p><strong>Αirline:</strong> {{airline}}</p>
                    <p><strong>From:</strong> {{arrival}}</p>
                    <p><strong>To:</strong> {{destination}}</p>
                    <p><strong>Date:</strong> {{date}}</p>
                    <p> <span class="flight-date" data-date="{{date}}"></span></p>

                </div>
            </div>
        {{/each}}
        </div>
    {{else}}
        <p>Δεν έχετε κάνει κρατήσεις πτήσεων.</p>
    {{/if}}
</body>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const today = new Date();
    today.setHours(0, 0, 0, 0); 

    const dates = document.querySelectorAll('.flight-date');

    dates.forEach(function(dateElement) {
        const flightDate = new Date(dateElement.getAttribute('data-date'));
        const timeDiff = flightDate - today;
        const daysLeft = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
        dateElement.textContent = daysLeft > 0 ? daysLeft + " days left" : "Flight is today!";
    });
});
</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>